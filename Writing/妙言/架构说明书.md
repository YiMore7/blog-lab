这是一份为你量身定制的**系统架构说明书**。

建议你将以下内容保存为 `README.md` 或 `架构说明书.md`，并直接放在 `Building` 根目录下。这样无论是你将来回顾，还是在 Trae 中打开项目时，都能第一时间看到这个“使用说明”。

-----

````markdown
# Building 知识库架构说明书

**更新日期**：2025-11-23
**核心目标**：实现“代码工程”与“知识写作”的物理隔离，同时兼顾 Trae 的自动化管理与妙言 (MiaoYan) 的极简写作体验。

---

## 1. 核心设计哲学

* **动静分离**：
    * **热数据 (Hot)**：正在进行的项目、笔记，放在 `writing` 目录（给妙言看）。
    * **冷数据 (Cold)**：完结的项目、历史归档，放在 `Archive` 目录（仅 Trae 可见）。
* **软硬分治**：
    * **Code**：代码项目（含 `node_modules`）放入 `Coding` 目录，彻底隔绝妙言的扫描。
    * **Text**：纯文本笔记放入 `writing` 目录。
* **工具分工**：
    * **Trae**：上帝视角。负责文件管理、归档、代码编写、以及**插入图片**（利用插件自动化）。
    * **妙言**：沉浸视角。负责纯文本写作、阅读。

---

## 2. 目录结构规范

```text
📂 Building (项目根目录 - Trae 打开此处)
 │
 ├── 📂 Coding          <-- 存放代码工程
 │    ├── 📂 my-web-app (含 node_modules，妙言看不到，不烦心)
 │    └── ...
 │
 ├── 📂 Archive         <-- 存放冷数据/历史归档
 │    ├── 📂 2024_Q3_旧项目
 │    └── ...
 │
 └── 📂 writing         <-- 【核心区域】妙言只连接此文件夹
      │
      ├── 📂 assets     <-- 【全局图床】所有笔记图片自动汇聚于此
      │
      ├── 📂 00_Inbox   <-- 收集箱：临时想法
      ├── 📂 Proj_AI    <-- 项目文件夹：采用扁平化命名 (策略A)
      ├── 📂 Life_周记
      └── ... (保持一级目录扁平，适应妙言的列表视图)
````

-----

## 3\. 软件配置指南

### A. Trae (VS Code) 设置

  * **插件**：`Paste Image` (by mushan)
  * **快捷键**：`Cmd + V` (仅在 Markdown 文件中生效)
  * **关键配置 (`settings.json`)**：
      * **存储路径**：强制指向 `writing/assets`，确保图片不散落。
      * **自动命名**：文件名前缀 + 时间戳。

<!-- end list -->

```json
// Trae 关键配置备份
{
    // 无论在哪个子目录粘贴，图片统一存入 writing/assets
    "pasteImage.path": "${projectRoot}/writing/assets",
    
    // 自动计算相对路径 (生成 ../assets/xxx.png)
    "pasteImage.basePath": "${currentFileDir}",
    
    // 命名规则：文件名_时间戳
    "pasteImage.namePrefix": "${currentFileNameWithoutExt}_",
    "pasteImage.defaultName": "Y-MM-DD-HH-mm-ss",
    
    "pasteImage.forceUnixStyleSeparator": true,
    "pasteImage.showFilePathConfirmInputBox": false
}
```

### B. 妙言 (MiaoYan) 设置

  * **连接目录**：**仅选择** `Building/writing`。
  * **注意**：不要让妙言打开 `Building` 根目录，否则会扫描到 `Coding` 里的代码垃圾文件。

-----

## 4\. 日常工作流 (SOP)

### ✅ 场景一：撰写图文笔记 (推荐)

1.  **工具**：使用 **Trae**。
2.  **动作**：截图 -\> `Cmd + V`。
3.  **结果**：
      * 图片自动飞入 `writing/assets`。
      * Markdown 自动生成链接 `![](../assets/xxx.png)`。
      * 文件名清晰可读。

### ✅ 场景二：纯文本沉浸写作

1.  **工具**：使用 **妙言**。
2.  **动作**：打开 `writing` 下的任意文件夹开始码字。
3.  **注意**：
      * 妙言能完美查看由 Trae 插入的图片。
      * *尽量避免在妙言中粘贴图片*（因为妙言会在子目录下乱建 `i` 文件夹，虽然不影响看，但破坏结构）。

### ✅ 场景三：项目完结归档

1.  **工具**：使用 **Trae**。
2.  **动作**：将文件夹从 `writing/Proj_某项目` **拖拽** 至 `Archive/2025_某项目`。
3.  **结果**：妙言列表瞬间清爽，但资料在 Trae 中永久保存。

-----

## 5\. 常见问题 (Q\&A)

  * **Q: 为什么妙言左侧看不到文件夹层级？**
      * **A**: 妙言设计如此。请在 `writing` 目录下使用 **“扁平化命名”**（如 `工作_项目A` 而不是 `工作/项目A`），减少文件夹嵌套。
  * **Q: 我在妙言里粘贴图片了怎么办？**
      * **A**: 没关系。它会在当前目录下生成一个 `i` 文件夹。如果你有洁癖，可以在 Trae 里把图片拖到 `assets` 并在 Markdown 里更新链接。
  * **Q: 图片显示裂开了？**
      * **A**: 检查图片是不是在 `writing/assets` 里。如果在，检查 Markdown 链接是否为 `../assets/图片名`（通常需要两个点 `..` 退回上一级）。

<!-- end list -->

```

---
